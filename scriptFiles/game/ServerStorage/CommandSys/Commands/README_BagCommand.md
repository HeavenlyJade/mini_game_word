# 背包物品操作指令使用说明

## 指令格式
```
PlayerItem {"玩家UID": "玩家UID", "物品类型": "物品名称", "数量": 数量, "操作类型": "操作类型"}
```

## 参数说明

### 必需参数
- **玩家UID**: 目标玩家的UID（数字）
- **物品类型**: 要操作的物品名称（字符串）
- **数量**: 物品数量（数字）
- **操作类型**: 操作类型，支持以下三种：
  - `"新增"` - 增加指定数量的物品
  - `"减少"` - 减少指定数量的物品
  - `"设置"` - 将物品数量设置为指定值

## 使用示例

### 1. 新增物品
```
PlayerItem {"玩家UID": "1972857840", "物品类型": "奖杯", "数量": 1000, "操作类型": "新增"}
```
- 给UID为1972857840的玩家增加1000个奖杯

### 2. 减少物品
```
PlayerItem {"玩家UID": "1972857840", "物品类型": "奖杯", "数量": 100, "操作类型": "减少"}
```
- 从UID为1972857840的玩家背包中减少100个奖杯

### 3. 设置物品数量
```
PlayerItem {"玩家UID": "1972857840", "物品类型": "奖杯", "数量": 500, "操作类型": "设置"}
```
- 将UID为1972857840的玩家的奖杯数量设置为500个

### 4. 清空物品
```
PlayerItem {"玩家UID": "1972857840", "物品类型": "奖杯", "数量": 0, "操作类型": "设置"}
```
- 清空UID为1972857840的玩家的所有奖杯

## 注意事项

1. **权限要求**: 只有拥有操作权限的玩家才能执行此指令
2. **数量验证**: 
   - 新增和减少操作的数量必须大于0
   - 设置操作的数量不能为负数
3. **物品存在性**: 减少和设置操作会检查玩家是否拥有足够的物品
4. **错误处理**: 如果操作失败，系统会显示相应的错误信息
5. **日志记录**: 所有操作都会记录到服务器日志中

## 错误信息示例

- `"缺少'操作类型'字段。有效类型: '新增', '减少', '设置'"`
- `"缺少'物品类型'字段"`
- `"物品数量必须大于0"`
- `"物品数量不能为负数"`
- `"玩家背包不存在"`
- `"从玩家 xxx 移除物品失败 (可能数量不足): xxx xxxx"`

## 技术实现

该指令基于现有的背包系统（BagMgr）实现，支持：
- 物品的增删改操作
- 数量验证和错误处理
- 玩家权限检查
- 操作日志记录
- 客户端数据同步 